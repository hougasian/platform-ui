// Accordion
//
// Leverage spacing utility classes for padding and margin for the content within the accordion.
// To show the content of the accordion use vue transitions and toggle the class `active` on `rim-accordion`.
//
// Markup:
// <div class="rim-accordion">
//   <div class="rim-accordion__header block-container pl-5 pr-3 py-3">          
//     <div class="block block-5">
//       <h3 class="mb-3">Aetna</h3>
//       <span>Aetna Health and Life</span>
//     </div>
//     <div class="block block-2">
//       <h3 class="mb-3">Status <span class="pill pill--circle__empty positive"></span></h3>
//       <span>Appointed</span>
//     </div>
//     <div class="block block-2">
//       <h3 class="mb-3">AWN</h3>
//       <span>GX000</span>
//     </div>
//     <div class="block block-2">
//       <h3 class="mb-3">Level</h3>
//       <span>0</span>
//     </div>
//     <div class="block block-1 flex flex--column flex--align-end flex--justify-center">
//       <div class="icon-menu">
//         <div class="icon-menu__item">
//           <a href="#" class="icon-menu__action text-negative--hover" role="button">
//             <i class="fas fa-trash-alt" focusable="false" aria-hidden="true"></i>
//           </a>
//         </div>
//         <div class="icon-menu__item">
//           <a href="#" class="icon-menu__action text-positive--hover" role="button">
//             <i class="fas fa-edit" focusable="false" aria-hidden="true"></i>
//           </a>
//         </div>
//       </div>
//     </div>
//   </div>
//   <div class="rim-accordion__content fade-in-from-none-enter-active">
//     <div class="px-4">
//       <p>content</p>
//     </div>
//   </div>
// </div>
//
// Styleguide Components.Accordion

// Active
//
// Adding `.active` changes the default header bar background and hover highlight.
//
// - .rim-accordion .active
//
// Markup:
// <div class="rim-accordion active">
//   <div class="rim-accordion__header">
//     header
//   </div>
//   <div class="rim-accordion__content fade-in-from-none-enter-active">
//     content
//   </div>
// </div>
//
// Styleguide Components.Accordion.Active

// Nested
// 
// You can nest accordions. By adding a `rim-accordion` inside a parent `rim-accordion`, you get the following look.
// 
// Markup:
// <div class="rim-accordion">
//   <div class="rim-accordion__header block-container pl-5 pr-3 py-3">          
//     Header
//   </div>
//   <div class="rim-accordion__content fade-in-from-none-enter-active">
//     <div class="px-4">
//       <p>content</p>
//     </div>
//     <div class="rim-accordion">
//       <div class="rim-accordion__header px-4 py-3 flex flex--justify-between flex--align-center">
//         <div class="flex flex--align-center">
//           <i class="fal fa-users text-med-blue mr-2"></i><h4 class="text-med-blue">Downlines</h4>
//         </div>
//         <i class="far fa-chevron-down rim-accordion__icon text-med-blue"></i>
//       </div>
//       <div class="rim-accordion__content fade-in-from-none-enter-active px-4">
//         Inner Accordion Content
//       </div>
//     </div>
//     <div class="rim-accordion">
//       <div class="rim-accordion__header px-4 py-3 flex flex--justify-between flex--align-center">
//         <div class="flex flex--align-center">
//           <i class="fal fa-file-import text-med-blue mr-2"></i><h4 class="text-med-blue">Request Contract Work</h4>
//         </div>
//         <i class="far fa-chevron-down rim-accordion__icon text-med-blue"></i>
//       </div>
//       <div class="rim-accordion__content fade-in-from-none-enter-active px-4">
//         Inner Accordion Content
//       </div>
//     </div>
//     <div class="rim-accordion">
//       <div class="rim-accordion__header px-4 py-3 flex flex--justify-between flex--align-center">
//         <div class="flex flex--align-center">                     
//           <i class="fal fa-file-upload text-med-blue mr-2"></i><h4 class="text-med-blue">Attachments</h4>
//         </div>
//         <i class="far fa-chevron-down rim-accordion__icon text-med-blue"></i>
//       </div>
//       <div class="rim-accordion__content fade-in-from-none-enter-active px-4">
//         Inner Accordion Content
//       </div>
//     </div>
//   </div>
// </div>
// 
// Styleguide Components.Accordion.Nested

// KSS specific
.rim-style-modifier__example {
  .rim-accordion {
    border-bottom-color: lighten(map-get($greyscale, 'light'), $hue-threshold * 2);
  }
}

.rim-accordion {

  $self: &;
  $primary-color: map-get($greyscale, 'base');
  $primary-background: map-get($greyscale, 'white');
  $secondary-background: map-get($greyscale, 'lighter');
  $primary-border-color: lighten(map-get($greyscale, 'light'), $hue-threshold * 2);
  $secondary-border-color: lighten(map-get($brand-colors, 'med-blue'), $hue-threshold);
  $active-background: map-get($brand-colors, 'med-blue' );
  $hover-border: map-get($brand-colors, 'skyblue' );

  background-color: $primary-background;
  border: 1px solid transparent;
  border-top-color: $primary-border-color;
  color: $primary-color;
  font-family: map-get($fonts, 'base');
  font-size: 100%;
  transition: $transitions;

  &:last-of-type {
    border-bottom-color: $primary-border-color;
  }

  &:not(.active):hover {
    border-color: $hover-border;

    .rim-accordion__header {
      background-color: $secondary-background;
    }    
  }

  &.active {
    border-color: transparent;
    box-shadow: 0px 0px 0px 2px $hover-border;

    > .rim-accordion__header {
      background-color: $secondary-background;

      .rim-accordion__icon {
        @extend %rotate-180;
      }

      + .rim-accordion__content {
        display: block;
      }
    }
  }

  &__header {
    cursor: pointer;
    position: relative;
    transition: $transitions;
    z-index: 10;
  }

  &__icon {
    transition: $transitions;
  }

  &__content {
    border-top: none;
    display: none;
    position: relative;
    z-index: 0;
  }


  // nested accordions
  .rim-accordion {    
    border: none;
    margin-bottom: map-get($spacers, 1 );

    &.active {
      border: none;
      box-shadow: none;
    }

    .rim-accordion__header {
      background-color: $secondary-background;
    }
  }
}
