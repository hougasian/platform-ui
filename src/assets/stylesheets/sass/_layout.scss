// Content Grid
// 
// Content Grid stuff
// 
// 
// Styleguide ContentGrid

.platform {
  background-color: map-get($greyscale, 'lighter');
  overflow-x: hidden;

  @supports(display: grid) {
    display: grid;
    grid-template-rows: $menu-height auto;
    grid-template-columns: 4rem 1fr;

    @include breakpoint(tablet, max) {
      grid-template-columns: 1fr;

      // add height of .today to header
      grid-template-rows: $menu-height + 3.3125rem auto;
    }
  }

  &.menu-open {
    
    aside {
      left: 0rem;
    }
  }

  main {
    padding-left: 4rem;
    width: 100%;
    transition: $transitions;

    @supports(display: grid) {
      grid-column: 2;
      grid-row: 2;
      padding-left: 0;
      width: auto;

      @include breakpoint(tablet, max) {
        grid-column: 1;
      }
    }

    @include breakpoint(tablet, max) {
      overflow-x: hidden;

      // height of mobile button wrapper and half of button
      padding-bottom: 4.75rem;
      position: relative;
      z-index: 1;
    }
  }

  aside {
    margin-top: $menu-height;
    position: fixed;
    transition: $transitions;
    margin-left: 0;
    width: 4rem;
    z-index: 50;

    @include breakpoint(tablet, max) {
      // 100% - header + today - mobile-menu-action-wrapper
      height: calc(100% - 7.8125rem - 3rem);
      left: -100%;
      margin-top: calc(#{$menu-height} + 3.3125rem);
      transition: $transitions;
      width: 100%;
      z-index: 2;
    }

    @supports(display: grid) {
      grid-column: 1;

      @include breakpoint(tablet, max) {
        grid-column: unset;
      }
    }
  }

  .aside-tab {
    background: map-get($greyscale, 'white');
    border-top-right-radius: 50%;
    border-bottom-right-radius: 50%;
    border: 1px solid map-get($greyscale, 'light-mid');
    color: map-get($greyscale, 'base');
    top: 50%;
    cursor: pointer;
    left: 4rem;
    margin-left: -1px;
    padding: .5rem;
    position: fixed;
    transition: $transitions;
    z-index: -1;

    @include breakpoint(tablet, max) {
      display: none;
    }

    &:hover {
      color: map-get($brand-colors, 'salmon');
    }
  }
}

// flex and positioning
.platform {
  &.toggle {
    @supports(display: grid) {
      grid-template-columns: 25vw 1fr;

      @include breakpoint(tablet, max) {
        grid-template-columns: 1fr;
      }
    }

    aside {
      margin-left: 0;
      width: 25vw;
      .aside-tab {
        left: 25vw;
      }
    }
    main {
      padding-left: 25vw;

      @supports(display: grid) {
        padding-left: 0;
        width: auto;

        @include breakpoint(tablet, max) {
          grid-column: 1;
        }
      }
    }
  }
}

.login {
  aside {
    position: fixed;
    height: 100vh;
    width: 40vw;
    z-index: 50;
  }
  main {
    margin-left: 40vw;
    width: 60vw;
  }
}


.rim-content-grid {
  padding: map-get($spacers, 5 ) $spacer;

  @supports (display: grid) {
    display: grid;
    grid-gap: map-get($spacers, 5 ) $spacer;
    grid-template-columns: repeat(12, 1fr);
    grid-template-rows: max-content;
  }  

  &__heading {
    @supports (display: grid) {
      grid-row: 1;
      grid-column: 1/13;
    }

    .has-side-content & {
      @include breakpoint(desktop, min) {
        @supports (display: grid) {
          grid-column: 1/10;
        }
      }
    }
  }

  &__content {
    @supports (display: grid) {
      grid-row: 2;
      grid-column: 1/13;
    }

    .has-side-content & {
      @include breakpoint(desktop, min) {
        @supports (display: grid) {
          grid-column: 1/10;
        }
      }
    }
  }

  &__side-content {
    @supports (display: grid) {
      @include breakpoint(desktop, max) {
        display: none;
      }

      @include breakpoint(desktop, min) {      
        align-self: baseline;
        grid-column: 10/13;
        grid-row: 2;
      }
    }
  }
}