@use "config";
@use "mixins";
@use "variables";
@use "sass:color";
@use "sass:map";
@use "sass:math";

// Tables
//
// Default table. Use the `table` class to get the table styles applied.
//
// Attach any `click` event directly to the `<th>` for a larger click target.
//
// These tables are responsive. They get the mobile view below the mobile breakpoint.
// You need to add the `data-label="{th - name}"` to the corresponding `<td>`. See the markup below.
//
// Turn row hover off by adding `table--no-hover`
//
// Markup:
// <table class="table">
//   <thead>
//     <tr>
//       <th>Company</th>
//       <th>Contact</th>
//       <th>Country</th>
//     </tr>
//   </thead>
//   <tbody>
//     <tr>
//       <td data-label="Company">
//         Alfreds Futterkiste
//       </td>
//       <td data-label="Contact">
//         Maria Anders
//       </td>
//       <td data-label="Country">
//         Germany
//       </td>
//     </tr>
//     <tr>
//       <td data-label="Company">
//         Centro comercial Moctezuma
//       </td>
//       <td data-label="Contact">
//         Francisco Chang
//       </td>
//       <td data-label="Country">
//         Mexico
//       </td>
//     </tr>
//     <tr>
//       <td data-label="Company">
//         Ernst Handel
//       </td>
//       <td data-label="Contact">
//         Roland Mendel
//       </td>
//       <td data-label="Country">
//         Austria
//       </td>
//     </tr>
//     <tr>
//       <td data-label="Company">
//         Island Trading
//       </td>
//       <td data-label="Contact">
//         Helen Bennett
//       </td>
//       <td data-label="Country">
//         UK
//       </td>
//     </tr>
//     <tr>
//       <td data-label="Company">
//         Laughing Bacchus Winecellars
//       </td>
//       <td data-label="Contact">
//         Yoshi Tannamuri
//       </td>
//       <td data-label="Country">
//         Canada
//       </td>
//     </tr>
//     <tr>
//       <td data-label="Company">
//         Magazzini Alimentari Riuniti
//       </td>
//       <td data-label="Contact">
//         Giovanni Rovelli
//       </td>
//       <td data-label="Country">
//         Italy
//       </td>
//     </tr>
//   </tbody>
// </table>
//
// Sometimes you don't want a resposive table? just add `unresponsive` to `table`
//
// <table class="table unresponsive">
//   <thead>
//     <tr>
//       <th></th>
//       <th>option one</th>
//       <th>option two</th>
//     </tr>
//   </thead>
//   <tbody>
//     <tr>
//       <td>
//         Desc
//       </td>
//       <td>
//         Pork Buns
//       </td>
//       <td>
//         Pork Buns
//       </td>
//     </tr>
//     <tr>
//       <td>
//         price
//       </td>
//       <td>
//         $5.00
//       </td>
//       <td>
//         $9.00
//       </td>
//     </tr>
//     <tr>
//       <td>
//         qty
//       </td>
//       <td>
//         5
//       </td>
//       <td>
//         2
//       </td>
//     </tr>
//   </tbody>
// </table>
//
// Styleguide Tables

@mixin table {
  $table-border: 1px solid color.adjust(map.get(variables.$greyscale, 'light'), $lightness: math.percentage(config.$hue-threshold * 2));
  $responsive-table-bottom-gap: map.get(variables.$spacers, 2);
  $responsive-table-label-bg: map.get(variables.$greyscale, 'lighter');
  width: 100%;
  background-color: transparent;
  border-collapse: separate;
  border-spacing: 0;
  @include mixins.breakpoint(tablet, max) {
    border: none;
  }

  thead {
    background-color: map.get(variables.$greyscale, 'lighter');
    border-bottom: 1px solid map.get(variables.$greyscale, 'light');
    color: map.get(variables.$greyscale, 'base');
    font-weight: bold;
    text-align: left;
    @include mixins.breakpoint(tablet, max) {
      border: none;
    }

    th {
      border: solid color.adjust(map.get(variables.$greyscale, 'light'), $lightness: math.percentage(config.$hue-threshold * 2));
      border-width: 1px 0;
    }
  }

  tr {
    background-color: transparent;
    transition: config.$transitions * 3;
    @include mixins.breakpoint(tablet, min) {
      &:hover {
        background-color: map.get(variables.$greyscale, 'lighter');
      }
    }

    td,
    th {
      padding: 1rem;
    }

    td {
      border-bottom: 1px solid color.adjust(map.get(variables.$greyscale, 'light'), $lightness: math.percentage(config.$hue-threshold * 2));
    }

    &:last-child {
      td {
        border-color: transparent;
      }
    }
  }
  @include mixins.breakpoint(tablet, max) {
    &:not(.unresponsive) {

      thead tr {
        position: absolute;
        top: -9999em;
        left: -9999em;
      }

      tr {
        border-bottom: none;
        display: block;

        td {
          align-items: flex-start;
          border: none;
          display: flex;
          flex-direction: column;

          &:before {
            content: attr(data-label);
            display: inline-block;
            font-weight: bold;
            line-height: 1.5;
            min-width: 40%;
            padding-right: map.get(variables.$spacers, 2);
            text-align: left;
          }
        }
      }

      tr + tr {
        border-top: 1px solid color.adjust(map.get(variables.$greyscale, 'light'), $lightness: math.percentage(config.$hue-threshold * 2));
        margin-top: $responsive-table-bottom-gap;
        padding-top: $responsive-table-bottom-gap;
      }
      /* Get table cells to act like rows */
    }
  }
  &--no-hover {
    tr {
      @include mixins.breakpoint(tablet, min) {
        &:hover {
          background-color: initial;
        }
      }
    }
  }
  &--bordered {
    // coming
  }
  &--condensed {
    // coming
  }
}

.pui-table {
  @include table;
}

.table {
  @include table;
}